<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="twitter:image:src" content="https://levanliu.github.io/images/favicon/android-chrome-512x512.png"><meta name="referrer" content="no-referrer-when-downgrade"><title>Travelling Salesman Problem - Lei Mao&#039;s Log Book</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#3273dc"><meta name="application-name" content="Lei Mao&#039;s Log Book"><meta name="msapplication-TileImage" content="/images/favicon/android-chrome-192x192.png"><meta name="msapplication-TileColor" content="#3273dc"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Lei Mao&#039;s Log Book"><meta name="apple-mobile-web-app-status-bar-style" content="default"><link rel="apple-touch-icon" sizes="192x192" href="/images/favicon/android-chrome-192x192.png"><link rel="apple-touch-icon" sizes="512x512" href="/images/favicon/android-chrome-512x512.png"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png"><link rel="apple-touch-icon" sizes="16x16" href="/images/favicon/favicon-16x16.png"><link rel="apple-touch-icon" sizes="32x32" href="/images/favicon/favicon-32x32.png"><meta name="description" content="A Gentle Introduction to Travelling Salesman Problem and Its Integer Linear Programming Solution"><meta property="og:type" content="blog"><meta property="og:title" content="Travelling Salesman Problem"><meta property="og:url" content="https://levanliu.github.io/blog/Travelling-Salesman-Problem/"><meta property="og:site_name" content="Lei Mao&#039;s Log Book"><meta property="og:description" content="A Gentle Introduction to Travelling Salesman Problem and Its Integer Linear Programming Solution"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://levanliu.github.io/images/favicon/android-chrome-512x512.png"><meta property="article:published_time" content="2021-07-20T07:00:00.000Z"><meta property="article:modified_time" content="2021-07-20T07:00:00.000Z"><meta property="article:author" content="Lei Mao"><meta property="article:tag" content="TSP"><meta property="article:tag" content="NP Problem"><meta property="article:tag" content="Linear Programming"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://levanliu.github.io/images/favicon/android-chrome-512x512.png"><meta property="twitter:creator" content="@matchaleimao"><meta property="twitter:site" content="Lei Mao&#039;s Log Book"><meta property="fb:admins" content="dukeleimao"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://levanliu.github.io/blog/Travelling-Salesman-Problem/"},"headline":"Travelling Salesman Problem","image":["https://levanliu.github.io/images/favicon/android-chrome-512x512.png"],"datePublished":"2021-07-20T07:00:00.000Z","dateModified":"2021-07-20T07:00:00.000Z","author":{"@type":"Person","name":"Lei Mao"},"publisher":{"@type":"Organization","name":"Lei Mao's Log Book","logo":{"@type":"ImageObject","url":"https://levanliu.github.io/images/favicon/android-chrome-512x512.png"}},"description":"A Gentle Introduction to Travelling Salesman Problem and Its Integer Linear Programming Solution"}</script><link rel="canonical" href="https://levanliu.github.io/blog/Travelling-Salesman-Problem/"><link rel="alternate" href="/atom.xml" title="Lei Mao&#039;s Log Book" type="application/atom+xml"><link rel="icon" href="/images/favicon/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons/css/academicons.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=PT+Sans+Narrow:wght@400;700&amp;family=PT+Serif"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-EJY6FXZBCB" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-EJY6FXZBCB');</script><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><script src="//m.servedby-buysellads.com/monetization.custom.js"></script><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/images/favicon/android-chrome-512x512.png" alt="Lei Mao&#039;s Log Book" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Lei Mao&#039;s Log Book</a><a class="navbar-item" href="/curriculum">Curriculum</a><a class="navbar-item" href="/blog">Blog</a><a class="navbar-item" href="/article">Articles</a><a class="navbar-item" href="/project">Projects</a><a class="navbar-item" href="/publication">Publications</a><a class="navbar-item" href="/reading">Readings</a><a class="navbar-item" href="/life">Life</a><a class="navbar-item" href="/essay">Essay</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/faq">FAQs</a></div><div class="navbar-end"><a class="navbar-item night" id="night-nav" title="Switch Color Scheme" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="GitHub" href="https://github.com/leimao"><i class="fab fa-github"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Gitter" href="https://gitter.im/leimao/community"><i class="fab fa-gitter"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><div class="card-content"><center><div class="bsa-standard" id="carbon-ad-01"></div><script>            (function() {             if (typeof _bsa !== 'undefined' && _bsa) {                 _bsa.init('custom', 'CWYD65QY', 'placement:leimaogithubio-standard', {                     target: '#carbon-ad-01',                     template: `             <a href='##link##' class='native-banner' style='background: ##backgroundColor##' rel='sponsored noopener' target='_blank' title='##company## — ##tagline##'>                 <img class='native-img' width='125' src='##logo##' />                 <div class='native-main'>                     <div class='native-details' style='                             color: ##textColor##;                             border-left: solid 1px ##textColor##;                         '>                         <span class='native-company'>Sponsored by ##company##</span>                         <span class='native-desc'>##description##</span>                     </div>                     <span class='native-cta' style='                             color: ##ctaTextColor##;                             background-color: ##ctaBackgroundColor##;                         '>##callToAction##</span>                 </div>             </a>             `,                 });                 }             })();         </script></center></div></div><div class="card"><article class="card-content article" role="article"><h1 class="title is-size-3" style="font-family: 'PT Sans Narrow', sans-serif">Travelling Salesman Problem</h1><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left" style="margin-bottom: 0.50rem"><span class="level-item"><i class="far fa-calendar-alt"> </i><time dateTime="2021-07-20T07:00:00.000Z" title="2021-07-20T07:00:00.000Z">07-20-2021</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="2021-07-20T07:00:00.000Z" title="2021-07-20T07:00:00.000Z">07-20-2021</time></span><span class="level-item"><i class="far fa-folder-open has-text-grey"></i> <a class="link-muted" href="/blog/">blog</a></span><span class="level-item"><i class="far fa-clock"></i> 11 minutes read (About 1628 words)</span><span class="level-item" id="busuanzi_container_page_pv"><i class="far fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span>&nbsp;visits</span></div></div><div class="content" style="margin-top: 1.0rem"><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>The classical travelling salesman problem (TSP) asks the following question: “Given a list of cities and the distances between each pair of cities, what is the shortest possible route that visits each city <em>exactly once</em> and returns to the origin city?” It is a classical NP-hard problem in combinatorial optimization, important in theoretical computer science and operations research.</p>
<p>It turns out that it could be formulated as a <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Travelling_salesman_problem#Integer_linear_programming_formulations">linear programming problem</a>. In this blog post, I would like to implement a linear programming solver for the TSP problem. </p>
<h2 id="Travelling-Salesman-Problem"><a href="#Travelling-Salesman-Problem" class="headerlink" title="Travelling Salesman Problem"></a>Travelling Salesman Problem</h2><h3 id="Miller-Tucker-Zemlin-MTZ-Integer-Linear-Programming-Formulation"><a href="#Miller-Tucker-Zemlin-MTZ-Integer-Linear-Programming-Formulation" class="headerlink" title="Miller-Tucker-Zemlin (MTZ) Integer Linear Programming Formulation"></a>Miller-Tucker-Zemlin (MTZ) Integer Linear Programming Formulation</h3><p>There are two notable TSP integer linear programming formulations, Miller-Tucker-Zemlin (MTZ) formulation and the Dantzig-Fulkerson-Johnson (DFJ) formulation. We will be focusing on the MTZ formulation, as it is easier to program using the existing integer linear programming library.</p>
<p>Suppose we have $n$ cities, from $1$ to $n$. We define a binary square matrix $X \in \{0,1\}^{n \times n}$, where</p>
<p>$$<br>x_{ij} =<br>\begin{cases}<br>  1 &amp; \text{if the path goes from city $i$ to city $j$}\\<br>  0 &amp; \text{otherwise}\\<br>\end{cases} \\<br>$$</p>
<p>and a distance square matrix $C \in \mathbb{R}^{n \times n}$, where $c_{ij}$ is the distance from city $i$ to city $j$. </p>
<p>It is trivial to construct the integer linear programming optimization problem with the following constraints for the TSP problem.</p>
<p>$$<br>\DeclareMathOperator*{\argmin}{argmin}<br>\DeclareMathOperator*{\argmax}{argmax}<br>\argmin_{x_{ij}, \forall i,j \in [1,n]} \sum_{i=1}^{n} \sum_{j \neq i, j=1}^{n} c_{ij} x_{ij}<br>$$</p>
<p>subject to </p>
<p>$$<br>\begin{gather}<br>x_{ij} \in {0,1} \quad \forall i,j \in [1,n] \\<br>\sum_{i=1, i \neq j}^{n} x_{ij} = 1 \quad \forall j \in [1,n] \\<br>\sum_{j=1, j \neq i}^{n} x_{ij} = 1 \quad \forall i \in [1,n] \\<br>\end{gather}<br>$$</p>
<p>However, with these constraints, we will likely have subtours in our solution, which violates the TSP setting that the travelling salesman has to return to the original city. Subtours are just the incorrect TSP solution which contains several directed cycles. For example, suppose we have six cities, $1, 2, 3, 4, 5, 6$, without additional constraints, $x_{1,2}=1, x_{2,3}=1, x_{3,1}=1, x_{4,5}=1, x_{5,6}=1, x_{6,4}=1$ ($1 \rightarrow 2 \rightarrow 3 \rightarrow 1$, $4 \rightarrow 5 \rightarrow 6 \rightarrow 4$) are one of the valid solutions for optimization but they are incorrect for the TSP settings.</p>
<p>To prevent subtours, Miller, Tucker, and Zemlin introduces additional auxiliary integer variables $u_2, u_3, \cdots, u_n$ and additional constraints.</p>
<p>$$<br>\begin{gather}<br>u_i \in \mathbb{Z} \quad \forall i \in [2,n] \\<br>1 \leq u_i \leq n - 1 \quad 2 \leq i \leq n \\<br>u_i - u_j + n x_{ij} \leq n - 1 \quad 2 \leq i \neq j \leq n \\<br>\end{gather}<br>$$</p>
<p>With the constraints, if there are more than one directed cycles, at least one cycle will not contain node $1$ and the inequality of the $u$ variables will not be satisfied. For the previous incorrect TSP solution, we will have $u_4 &lt; u_5 &lt; u_6 &lt; u_4$. </p>
<p>Also notice that linear function is both convex and concave (please show a simple proof on your own), which implies that every local optimum for the linear function is a global optimum. This means that the optimum solution from linear programming solver for the TSP problem is global optimum.</p>
<h3 id="Install-Dependencies"><a href="#Install-Dependencies" class="headerlink" title="Install Dependencies"></a>Install Dependencies</h3><p>We will install and use <code>pulp</code> and <code>glpk</code> linear programming solvers to solve the TSP problems.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install glpk-utils</span><br><span class="line"></span><br><span class="line">pip install pulp==2.4</span><br></pre></td></tr></table></figure>


<h3 id="TSP-Integer-Linear-Programming-Solver-Python-Implementation"><a href="#TSP-Integer-Linear-Programming-Solver-Python-Implementation" class="headerlink" title="TSP Integer Linear Programming Solver Python Implementation"></a>TSP Integer Linear Programming Solver Python Implementation</h3><p>We implemented a brute force TSP solver and an integer linear programming TSP solver, and verified the correctness of the two solvers on symmetric TSP problems. The two solvers could also be used for asymmetric TSP problems.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> permutations</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">from</span> timeit <span class="keyword">import</span> default_timer <span class="keyword">as</span> timer</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> timedelta</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span>, <span class="type">Tuple</span>, <span class="type">Union</span>, <span class="type">Callable</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> pulp <span class="keyword">import</span> LpMaximize, LpMinimize, LpProblem, LpStatus, lpSum, LpVariable, LpBinary, LpInteger, lpDot</span><br><span class="line"><span class="keyword">from</span> pulp <span class="keyword">import</span> GLPK</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">idx_2d_to_1d</span>(<span class="params">i: <span class="built_in">int</span>, j: <span class="built_in">int</span>, width: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line"></span><br><span class="line">    <span class="comment"># i, j are in 1-indexed</span></span><br><span class="line">    <span class="comment"># The returned index are 0 indexed.</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (i - <span class="number">1</span>) * width + (j - <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">assemble_tsp_solution</span>(<span class="params">non_zero_idx: <span class="type">List</span>[<span class="type">Tuple</span>[<span class="built_in">int</span>, <span class="built_in">int</span>]]</span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span><br><span class="line"></span><br><span class="line">    <span class="comment"># The TSP problem ensures that each city is visited exactly once.</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># For example,</span></span><br><span class="line">    <span class="comment"># [(2, 4), (3, 1), (4, 3), (1, 2)] -&gt; [1, 2, 4, 3]</span></span><br><span class="line">    <span class="comment"># Set the starting node to be 1 arbitrarily.</span></span><br><span class="line"></span><br><span class="line">    n = <span class="built_in">len</span>(non_zero_idx)</span><br><span class="line">    tsp_solution = [<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">    src_tgt_map = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> idx <span class="keyword">in</span> non_zero_idx:</span><br><span class="line">        src_tgt_map[idx[<span class="number">0</span>]] = idx[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">    src = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> <span class="built_in">len</span>(tsp_solution) &lt; n:</span><br><span class="line">        tgt = src_tgt_map[src]</span><br><span class="line">        tsp_solution.append(tgt)</span><br><span class="line">        src = tgt</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(tsp_solution) == n:</span><br><span class="line">            <span class="keyword">assert</span> src_tgt_map[src] == <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> tsp_solution</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">verify_symmetric_tsp_solution_equality</span>(<span class="params">tsp_solution_1: <span class="type">List</span>[<span class="built_in">int</span>],</span></span><br><span class="line"><span class="params">                                           tsp_solution_2: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (tsp_solution_1[:<span class="number">1</span>] + tsp_solution_1[:<span class="number">0</span>:-<span class="number">1</span>]</span><br><span class="line">            ) == tsp_solution_2 <span class="keyword">or</span> tsp_solution_1 == tsp_solution_2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">tsp_brute_force_solver</span>(<span class="params"></span></span><br><span class="line"><span class="params">        distance_matrix: np.ndarray</span>) -&gt; <span class="type">Tuple</span>[<span class="type">List</span>[<span class="built_in">int</span>], <span class="built_in">float</span>]:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">assert</span> distance_matrix.ndim == <span class="number">2</span></span><br><span class="line">    <span class="keyword">assert</span> distance_matrix.shape[<span class="number">0</span>] == distance_matrix.shape[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">    n = distance_matrix.shape[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    perms = permutations(<span class="built_in">range</span>(<span class="number">2</span>, n + <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">    tsp_solution = <span class="literal">None</span></span><br><span class="line">    optimal_cost = <span class="built_in">float</span>(<span class="string">&quot;inf&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> perm <span class="keyword">in</span> perms:</span><br><span class="line">        perm = [<span class="number">1</span>] + <span class="built_in">list</span>(perm)</span><br><span class="line">        cost = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">            j = (i + <span class="number">1</span>) % n</span><br><span class="line">            cost += distance_matrix[perm[i] - <span class="number">1</span>][perm[j] - <span class="number">1</span>]</span><br><span class="line">        <span class="keyword">if</span> cost &lt; optimal_cost:</span><br><span class="line">            optimal_cost = cost</span><br><span class="line">            tsp_solution = perm</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> tsp_solution, optimal_cost</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">tsp_mtz_integer_linear_programming_solver</span>(<span class="params"></span></span><br><span class="line"><span class="params">        distance_matrix: np.ndarray</span>) -&gt; <span class="type">Tuple</span>[<span class="type">List</span>[<span class="built_in">int</span>], <span class="built_in">float</span>]:</span><br><span class="line"></span><br><span class="line">    <span class="comment"># TSP MTZ formulation</span></span><br><span class="line">    <span class="comment"># https://en.wikipedia.org/wiki/Travelling_salesman_problem#Miller%E2%80%93Tucker%E2%80%93Zemlin_formulation</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">assert</span> distance_matrix.ndim == <span class="number">2</span></span><br><span class="line">    <span class="keyword">assert</span> distance_matrix.shape[<span class="number">0</span>] == distance_matrix.shape[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">    n = distance_matrix.shape[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    distance_list = distance_matrix.flatten().tolist()</span><br><span class="line"></span><br><span class="line">    model = LpProblem(name=<span class="string">&quot;TSP-Problem&quot;</span>, sense=LpMinimize)</span><br><span class="line"></span><br><span class="line">    x_variables = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">            x_variables.append(LpVariable(name=<span class="string">f&quot;x_<span class="subst">&#123;i+<span class="number">1</span>&#125;</span>_<span class="subst">&#123;j+<span class="number">1</span>&#125;</span>&quot;</span>, cat=LpBinary))</span><br><span class="line">    <span class="comment"># The first value in the u_variables is a dummy value and is never used.</span></span><br><span class="line">    <span class="comment"># Depending on the literature, the lower bound might be 2, and the upper bound might be n. It is actually equivalent.</span></span><br><span class="line">    u_variables = [<span class="number">1</span>] + [</span><br><span class="line">        LpVariable(name=<span class="string">f&quot;u_<span class="subst">&#123;i+<span class="number">2</span>&#125;</span>&quot;</span>, lowBound=<span class="number">1</span>, upBound=n - <span class="number">1</span>, cat=LpInteger)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n - <span class="number">1</span>)</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Add objectives.</span></span><br><span class="line">    model += lpDot(x_variables, distance_list)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Add constraints.</span></span><br><span class="line">    <span class="comment"># sum_&#123;i=1, i \neq j&#125;^&#123;n&#125; x_&#123;ij&#125; = 1 for all j</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">        sum_exp = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> i != j:</span><br><span class="line">                idx_id = idx_2d_to_1d(i=i, j=j, width=n)</span><br><span class="line">                sum_exp += x_variables[idx_id]</span><br><span class="line">        model += sum_exp == <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># sum_&#123;j=1, j \neq i&#125;^&#123;n&#125; x_&#123;ji&#125; = 1 for all i</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">        sum_exp = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> j != i:</span><br><span class="line">                idx_id = idx_2d_to_1d(i=i, j=j, width=n)</span><br><span class="line">                sum_exp += x_variables[idx_id]</span><br><span class="line">        model += sum_exp == <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># u_i - u_j + n x_&#123;ij&#125; \neq n - 1 for all 2 &lt;= i, j &lt;= n and i \neq j</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, n + <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, n + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> i != j:</span><br><span class="line">                idx_id = idx_2d_to_1d(i=j, j=i, width=n)</span><br><span class="line">                model += u_variables[i - <span class="number">1</span>] - u_variables[</span><br><span class="line">                    j - <span class="number">1</span>] + n * x_variables[idx_id] &lt;= n - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    status = model.solve(solver=GLPK(msg=<span class="literal">False</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">assert</span> status == <span class="literal">True</span>, <span class="string">&quot;Linear programming solver did not solve the problem successfully.&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Collect TSP solution</span></span><br><span class="line">    non_zero_idx = []</span><br><span class="line">    <span class="keyword">for</span> variable <span class="keyword">in</span> model.variables():</span><br><span class="line">        <span class="keyword">if</span> variable.name.startswith(<span class="string">&quot;x_&quot;</span>) <span class="keyword">and</span> variable.value() == <span class="number">1</span>:</span><br><span class="line">            _, i, j = variable.name.split(<span class="string">&quot;_&quot;</span>)</span><br><span class="line">            i = <span class="built_in">int</span>(i)</span><br><span class="line">            j = <span class="built_in">int</span>(j)</span><br><span class="line">            non_zero_idx.append((i, j))</span><br><span class="line">    <span class="keyword">assert</span> <span class="built_in">len</span>(non_zero_idx) == n</span><br><span class="line"></span><br><span class="line">    tsp_solution = assemble_tsp_solution(non_zero_idx=non_zero_idx)</span><br><span class="line"></span><br><span class="line">    optimal_cost = model.objective.value()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> tsp_solution, optimal_cost</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_random_symmetric_distance_matrix</span>(<span class="params">n: <span class="built_in">int</span></span>) -&gt; np.ndarray:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">euclidean_distance</span>(<span class="params">node_1: <span class="type">Tuple</span>[<span class="built_in">float</span>, <span class="built_in">float</span>],</span></span><br><span class="line"><span class="params">                           node_2: <span class="type">Tuple</span>[<span class="built_in">float</span>, <span class="built_in">float</span>]</span>) -&gt; <span class="built_in">float</span>:</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> math.sqrt((node_1[<span class="number">0</span>] - node_2[<span class="number">0</span>])**<span class="number">2</span> +</span><br><span class="line">                         (node_1[<span class="number">1</span>] - node_2[<span class="number">1</span>])**<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    nodes = [(random.uniform(<span class="number">0</span>, <span class="number">1</span>), random.uniform(<span class="number">0</span>, <span class="number">1</span>)) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n)]</span><br><span class="line"></span><br><span class="line">    distance_matrix = np.zeros((n, n))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">            distance = euclidean_distance(nodes[i], nodes[j])</span><br><span class="line">            distance_matrix[i][j] = distance</span><br><span class="line">            distance_matrix[j][i] = distance</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> distance_matrix</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line"></span><br><span class="line">    random_seed = <span class="number">0</span></span><br><span class="line">    n = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">    random.seed(random_seed)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># distance_matrix = np.array(</span></span><br><span class="line">    <span class="comment">#     [[  0,   1, 1, 1.5],</span></span><br><span class="line">    <span class="comment">#     [  1,   0, 1.5, 1],</span></span><br><span class="line">    <span class="comment">#     [  1, 1.5,   0, 1],</span></span><br><span class="line">    <span class="comment">#     [1.5,   1,   1, 0]]</span></span><br><span class="line">    <span class="comment"># )</span></span><br><span class="line"></span><br><span class="line">    distance_matrix = create_random_symmetric_distance_matrix(n=n)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;-&quot;</span> * <span class="number">75</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Distance Matrix (Symmetric):&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(distance_matrix)</span><br><span class="line"></span><br><span class="line">    start = timer()</span><br><span class="line">    tsp_mtz_integer_linear_programming_solution, tsp_mtz_integer_linear_programming_optimal_cost = tsp_mtz_integer_linear_programming_solver(</span><br><span class="line">        distance_matrix=distance_matrix)</span><br><span class="line">    end = timer()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;-&quot;</span> * <span class="number">75</span>)</span><br><span class="line">    <span class="built_in">print</span>(</span><br><span class="line">        <span class="string">f&quot;Integer Linear Programming Solver Time Elapsed: <span class="subst">&#123;timedelta(seconds=end-start)&#125;</span>&quot;</span></span><br><span class="line">    )</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Integer Linear Programming Solver Solution:&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(tsp_mtz_integer_linear_programming_solution,</span><br><span class="line">          tsp_mtz_integer_linear_programming_optimal_cost)</span><br><span class="line"></span><br><span class="line">    start = timer()</span><br><span class="line">    tsp_brute_force_solution, tsp_brute_force_optimal_cost = tsp_brute_force_solver(</span><br><span class="line">        distance_matrix=distance_matrix)</span><br><span class="line">    end = timer()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;-&quot;</span> * <span class="number">75</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Brute Force Solver Time Elapsed: <span class="subst">&#123;timedelta(seconds=end-start)&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Brute Force Solver Solution:&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(tsp_brute_force_solution, tsp_brute_force_optimal_cost)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">assert</span> verify_symmetric_tsp_solution_equality(</span><br><span class="line">        tsp_solution_1=tsp_mtz_integer_linear_programming_solution,</span><br><span class="line">        tsp_solution_2=tsp_brute_force_solution)</span><br><span class="line">    <span class="keyword">assert</span> np.isclose(tsp_mtz_integer_linear_programming_optimal_cost,</span><br><span class="line">                      tsp_brute_force_optimal_cost)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line"></span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="TSP-Problem-Solver-Execution"><a href="#TSP-Problem-Solver-Execution" class="headerlink" title="TSP Problem Solver Execution"></a>TSP Problem Solver Execution</h3><p>Running the following program will print out the solution for the TSP problem in the terminal.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">$ python tsp.py </span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">Distance Matrix (Symmetric):</span><br><span class="line">[[0.         0.65474242 0.48539707 0.45866571 0.40714944 0.26115321</span><br><span class="line">  0.56258812 0.55552086 0.23412879 0.14821244]</span><br><span class="line"> [0.65474242 0.         0.17189572 0.36593013 0.32926671 0.54598486</span><br><span class="line">  0.51589165 0.19797614 0.87365771 0.75205935]</span><br><span class="line"> [0.48539707 0.17189572 0.         0.29085421 0.18178614 0.4091835</span><br><span class="line">  0.41922677 0.18792852 0.70192003 0.58017765]</span><br><span class="line"> [0.45866571 0.36593013 0.29085421 0.         0.41570622 0.23665499</span><br><span class="line">  0.67580554 0.17365329 0.69104706 0.59943568]</span><br><span class="line"> [0.40714944 0.32926671 0.18178614 0.41570622 0.         0.43863303</span><br><span class="line">  0.26011635 0.36180871 0.58918709 0.4614387 ]</span><br><span class="line"> [0.26115321 0.54598486 0.4091835  0.23665499 0.43863303 0.</span><br><span class="line">  0.67474465 0.38543385 0.47810141 0.40935704]</span><br><span class="line"> [0.56258812 0.51589165 0.41922677 0.67580554 0.26011635 0.67474465</span><br><span class="line">  0.         0.6071072  0.66767467 0.54827597]</span><br><span class="line"> [0.55552086 0.19797614 0.18792852 0.17365329 0.36180871 0.38543385</span><br><span class="line">  0.6071072  0.         0.78812019 0.67931288]</span><br><span class="line"> [0.23412879 0.87365771 0.70192003 0.69104706 0.58918709 0.47810141</span><br><span class="line">  0.66767467 0.78812019 0.         0.12808409]</span><br><span class="line"> [0.14821244 0.75205935 0.58017765 0.59943568 0.4614387  0.40935704</span><br><span class="line">  0.54827597 0.67931288 0.12808409 0.        ]]</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">Integer Linear Programming Solver Time Elapsed: 0:00:00.024176</span><br><span class="line">Integer Linear Programming Solver Solution:</span><br><span class="line">[1, 9, 10, 7, 5, 3, 2, 8, 4, 6] 2.3937246803810788</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">Brute Force Solver Time Elapsed: 0:00:02.765906</span><br><span class="line">Brute Force Solver Solution:</span><br><span class="line">[1, 6, 4, 8, 2, 3, 5, 7, 10, 9] 2.3937246803810788</span><br></pre></td></tr></table></figure>


<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Although the linear programming solver is much faster ($100\times$) than the brute force solver for the TSP problems in Python when the number of nodes is small, the linear programming solver will still hang as the number of nodes becomes larger ($\geq 23$) because the number of variables and constraints grow dramatically.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Travelling_salesman_problem">Travelling Salesman Problem - Wikipedia</a></li>
<li><a target="_blank" rel="noopener" href="https://epubs.siam.org/doi/pdf/10.1137/S00361445023685">Teaching Integer Programming Formulations Using the Traveling Salesman Problem</a></li>
</ul>
</div><div class="article-licensing box"><div class="licensing-title"><p>Travelling Salesman Problem</p><p><a href="https://levanliu.github.io/blog/Travelling-Salesman-Problem/">https://levanliu.github.io/blog/Travelling-Salesman-Problem/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Lei Mao</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>07-20-2021</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>07-20-2021</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <div><a class="link-muted" rel="tag" href="/tags/TSP/">TSP,</a> </div><div><a class="link-muted" rel="tag" href="/tags/NP-Problem/">NP Problem,</a> </div><div><a class="link-muted" rel="tag" href="/tags/Linear-Programming/">Linear Programming </a> </div></div></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=61b5930d440224001908310c&amp;product=inline-share-buttons" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered has-text-weight-normal">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" data-type="paypal" onclick="document.getElementById(&#039;paypal-donate-form&#039;).submit()"><span class="icon is-small"><i class="fab fa-paypal"></i></span><span>Paypal</span></a><form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" rel="noopener" id="paypal-donate-form"><input type="hidden" name="cmd" value="_donations"><input type="hidden" name="business" value="SSVSLEH4X85LU"><input type="hidden" name="currency_code" value="USD"></form><a class="button donate" href="https://www.buymeacoffee.com/leimao" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>Buy me a coffee</span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/blog/CPP-Smart-Pointer-Custom-Deleter/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Custom Deleter for C++ Smart Pointers</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/blog/Graph-Search-Traversal-Algorithms/"><span class="level-item">Graph Search and Traversal Algorithms</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card" id="comment-card"><div class="card-content"><h3 class="title is-5">Comments</h3><div class="comment-block"><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://levanliu.github.io/blog/Travelling-Salesman-Problem/';
            this.page.identifier = '/blog/Travelling-Salesman-Problem/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'leimao-github-io' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/author_images/Lei-Bio-Medium.jpg" alt="Lei Mao"></figure><p class="title is-size-4 is-block" style="line-height:inherit;margin-bottom:0.30rem;">Lei Mao</p><p class="is-block" style="white-space: pre-line; font-style: italic; margin-bottom: 0.50rem; font-size: 0.8em">Artificial Intelligence
Machine Learning
Computer Science
</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Santa Clara, California</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">733</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">453</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/leimao" target="_blank" rel="noopener"><i class="fab fa-github"></i>  Follow</a> <a class="level-item button is-primary is-rounded" href="https://github.com/sponsors/leimao" target="_blank" rel="noopener"><i class="fas fa-heart"></i>  Sponsor</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/leimao"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/matchaleimao"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="LinkedIn" href="https://www.linkedin.com/in/lei-mao/"><i class="fab fa-linkedin"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:dukeleimao@gmail.com"><i class="fas fa-envelope-square"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="G.Scholar" href="https://scholar.google.com/citations?user=R2VUf7YAAAAJ"><i class="ai ai-google-scholar-square"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#Introduction"><span class="level-left"><span class="level-item">1</span><span class="level-item">Introduction</span></span></a></li><li><a class="level is-mobile" href="#Travelling-Salesman-Problem"><span class="level-left"><span class="level-item">2</span><span class="level-item">Travelling Salesman Problem</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Miller-Tucker-Zemlin-MTZ-Integer-Linear-Programming-Formulation"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">Miller-Tucker-Zemlin (MTZ) Integer Linear Programming Formulation</span></span></a></li><li><a class="level is-mobile" href="#Install-Dependencies"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">Install Dependencies</span></span></a></li><li><a class="level is-mobile" href="#TSP-Integer-Linear-Programming-Solver-Python-Implementation"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">TSP Integer Linear Programming Solver Python Implementation</span></span></a></li><li><a class="level is-mobile" href="#TSP-Problem-Solver-Execution"><span class="level-left"><span class="level-item">2.4</span><span class="level-item">TSP Problem Solver Execution</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Conclusion"><span class="level-left"><span class="level-item">3</span><span class="level-item">Conclusion</span></span></a></li><li><a class="level is-mobile" href="#Reference"><span class="level-left"><span class="level-item">4</span><span class="level-item">Reference</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget"><div class="g-ads-x"><div class="card-content"><div class="menu"><h3 class="menu-label">Advertisement</h3></div><br><center><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CWYDCK3L&amp;placement=leimaogithubio" id="_carbonads_js"></script></center></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/images/favicon/android-chrome-512x512.png" alt="Lei Mao&#039;s Log Book" height="28"></a><p class="is-size-7"><span>&copy; 2017-2024 Lei Mao</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">Site UV: <span id="busuanzi_value_site_uv"><i class="fa fa-spinner fa-spin"></i></span></span> <span id="busuanzi_container_site_pv">Site PV: <span id="busuanzi_value_site_pv"><i class="fa fa-spinner fa-spin"></i></span></span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="GitHub" href="https://github.com/leimao"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/javascript" id="MathJax-script" async>MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      },
      chtml: {
        matchFontHeight: false
      }
    };</script><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js"></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><script src="/js/night.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>